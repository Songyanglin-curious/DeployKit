## ä½¿ç”¨Electron-builderæ‰“åŒ…

![1760191374170](image/æ‰“åŒ…é—®é¢˜è®°å½•/1760191374170.png)

è§£å†³æ–¹æ³•æ‰‹åŠ¨ä¸‹è½½è¯¥å®‰è£…åŒ…

ç„¶åè§£å‹æ”¾åœ¨æœ¬åœ°æ¢ç¼“å­˜

#### 1. **ä¸‹è½½æ–‡ä»¶**

æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—®ï¼š

```
https://cdn.npmmirror.com/binaries/electron-builder-binaries/winCodeSign-2.6.0.7z
```

ä¸‹è½½ `winCodeSign-2.6.0.7z`

#### 2. **è§£å‹æ–‡ä»¶**

* ä½¿ç”¨ [7-Zip](https://www.7-zip.org/) æˆ– Bandizip è§£å‹ã€‚
* è§£å‹åå¾—åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼š`winCodeSign-2.6.0`

#### 3. **æ”¾å…¥ electron-builder ç¼“å­˜ç›®å½•**

è·¯å¾„ä¸ºï¼ˆWindowsï¼‰ï¼š

```
C:\Users\<ä½ çš„ç”¨æˆ·å>\AppData\Local\electron-builder\Cache\winCodeSign
```

> ğŸ’¡ å¦‚æœç›®å½•ä¸å­˜åœ¨ï¼Œè¯·æ‰‹åŠ¨åˆ›å»ºï¼š
>
> ```
> mkdir -p %LOCALAPPDATA%\electron-builder\Cache\winCodeSign
> ```

ç„¶åæŠŠ **è§£å‹å‡ºæ¥çš„ `winCodeSign-2.6.0` æ–‡ä»¶å¤¹** æ”¾è¿›å»ï¼Œæœ€ç»ˆç»“æ„ï¼š

```
%LOCALAPPDATA%\electron-builder\Cache\winCodeSign\winCodeSign-2.6.0\
```

### nsisåŒ…

`downloading     url=https://github.com/electron-userland/electron-builder-binaries/releases/download/nsis-3.0.4.1/nsis-3.0.4.1.7z size=1.3 MB parts=1`

æ”¾åœ¨ç¼“å­˜

```
C:\Users\<ä½ çš„ç”¨æˆ·å>\AppData\Local\electron-builder\Cache\winCodeSign
```

### nsis-resources

```
%LOCALAPPDATA%\electron-builder\Cache\nsis\nsis-resources-3.4.1
```

## æ‰“åŒ…æ–‡ä»¶å ç”¨

> è®© Vite å’Œ Electron Builder ä½¿ç”¨å®Œå…¨ç‹¬ç«‹çš„è¾“å‡ºç›®å½•



#### 1. **Vite é»˜è®¤è¾“å‡ºåˆ° `dist/`**

```
// vite.config.js ä¸­å¦‚æœä¸æŒ‡å®š outDirï¼Œé»˜è®¤å°±æ˜¯ 'dist'
build: {
  outDir: 'dist' // â† é»˜è®¤å€¼
}
```

#### 2. **`vite-plugin-electron` é»˜è®¤ä¹Ÿç”¨ `dist/` åšä¸­é—´äº§ç‰©**

è™½ç„¶å®ƒæŠŠä¸»è¿›ç¨‹è¾“å‡ºåˆ° `dist-electron/`ï¼Œä½†**æŸäº›ç‰ˆæœ¬æˆ–é…ç½®ä¸‹ä¼šä¸´æ—¶å†™å…¥ `dist/win-unpacked`** ï¼ˆå°¤å…¶æ˜¯å½“ä½ ä¹‹å‰è¿è¡Œè¿‡ `electron-builder`ï¼‰ã€‚

#### 3. **`electron-builder` é»˜è®¤ä¹Ÿç”¨ `dist/` ä½œä¸ºä¸´æ—¶ unpacked ç›®å½•**

å³ä½¿ä½ åœ¨ `electron-builder.config.js` ä¸­è®¾ç½®äº†ï¼š

```
directories: {
  output: 'release'
}
```

å®ƒ **ä»ç„¶ä¼šåœ¨ `dist/win-unpacked` ç”Ÿæˆä¸´æ—¶è§£åŒ…æ–‡ä»¶** ï¼ˆè¿™æ˜¯å†å²è¡Œä¸ºï¼Œç”¨äºè°ƒè¯•å’Œç­¾åï¼‰ã€‚

> ğŸ“Œ æ‰€ä»¥ï¼š**ä¸‰ä¸ªå·¥å…·ï¼ˆVite + vite-plugin-electron + electron-builderï¼‰éƒ½åœ¨å¾€ `dist/` å†™ä¸œè¥¿ï¼**



### å¦‚ä½•è®© VS Code å®Œå…¨å¿½ç•¥æ„å»ºç›®å½•ï¼Ÿ

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.vscode/settings.json`ï¼š

```json
{
    "files.watcherExclude": {
        "**/renderer-dist/**": true,
        "**/dist-electron/**": true,
        "**/release/**": true,
        "**/release-unpacked/**": true
    }
}

```

> è¿™æ · VS Code **ä¸ä¼šè¯»å–ã€ä¸ä¼šç´¢å¼•ã€ä¸ä¼šç›‘å¬**è¿™äº›ç›®å½•ï¼Œå½»åº•æœç»æ–‡ä»¶é”ï¼
